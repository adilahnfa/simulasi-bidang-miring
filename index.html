<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Simulasi Gerak Benda pada Bidang Miring</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      text-align: center;
    }

    .panel {
      background: white;
      padding: 15px;
      width: 320px;
      margin: auto;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    label {
      display: block;
      margin-top: 10px;
    }

    input {
      width: 100%;
      padding: 5px;
    }

    button {
      margin-top: 15px;
      padding: 8px 15px;
      font-size: 14px;
      cursor: pointer;
    }

    canvas {
      background: white;
      margin-top: 20px;
      border: 1px solid #ccc;
    }
  </style>
</head>

<body>

<h1>Simulasi Gerak Benda pada Bidang Miring</h1>

<div class="panel">
  <label>Sudut Bidang (θ derajat)</label>
  <input type="number" id="theta" value="30">

  <label>Koefisien Gesek Statis (μs)</label>
  <input type="number" id="mu_s" value="0.4" step="0.01">

  <label>Koefisien Gesek Kinetik (μk)</label>
  <input type="number" id="mu_k" value="0.3" step="0.01">

  <button onclick="runSimulation()">Jalankan Simulasi</button>
</div>

<canvas id="canvas" width="600" height="300"></canvas>

<p id="info"></p>

<!-- ========================= -->
<!-- JAVASCRIPT -->
<!-- ========================= -->
<script>
const g = 9.81;

function runSimulation() {
  const theta = parseFloat(document.getElementById("theta").value) * Math.PI / 180;
  const mu_s = parseFloat(document.getElementById("mu_s").value);
  const mu_k = parseFloat(document.getElementById("mu_k").value);

  const info = document.getElementById("info");

  // Kondisi mulai bergerak
  if (Math.tan(theta) <= mu_s) {
    info.innerHTML = "Benda tidak bergerak karena gaya gesek statis masih mampu menahan benda.";
    return;
  }

  // Percepatan analitik
  const a = g * (Math.sin(theta) - mu_k * Math.cos(theta));
  info.innerHTML = "Benda bergerak dengan percepatan analitik a = " + a.toFixed(2) + " m/s²";

  // Parameter simulasi
  let dt = 0.02;
  let tMax = 3;

  let xE = 0, vE = 0; // Euler
  let xR = 0, vR = 0; // Runge-Kutta

  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.beginPath();
  ctx.moveTo(0, canvas.height);

  for (let t = 0; t <= tMax; t += dt) {

    // Euler
    vE += a * dt;
    xE += vE * dt;

    // Runge–Kutta Orde 4
    let k1v = a * dt;
    let k1x = vR * dt;

    let k2v = a * dt;
    let k2x = (vR + 0.5 * k1v) * dt;

    let k3v = a * dt;
    let k3x = (vR + 0.5 * k2v) * dt;

    let k4v = a * dt;
    let k4x = (vR + k3v) * dt;

    vR += (k1v + 2*k2v + 2*k3v + k4v) / 6;
    xR += (k1x + 2*k2x + 2*k3x + k4x) / 6;

    let px = (t / tMax) * canvas.width;
    let py = canvas.height - xR * 50;

    ctx.lineTo(px, py);
  }

  ctx.stroke();
}
</script>

</body>
</html>
